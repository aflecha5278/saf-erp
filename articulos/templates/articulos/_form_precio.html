{% load widget_tweaks %}
<div class="row mb-3">
  <div class="col-md-3">
    {{ form.modo_calculo.label_tag }}
    {{ form.modo_calculo|add_class:"select-control input-cianova w-100"|attr:"id:id_modo_calculo" }}
  </div>
  <div class="col-md-3">
    {{ form.precosto.label_tag }}
    {{ form.precosto|add_class:"form-control input-cianova w-100"|attr:"id:id_precosto" }}
  </div>
  <div class="col-md-3">
    {{ form.margen.label_tag }}
    {{ form.margen|add_class:"form-control input-cianova w-100"|attr:"id:id_margen" }}
  </div>
  <div class="col-md-3">
    {{ form.ncodalic.label_tag }}
    {{ form.ncodalic|add_class:"form-select input-cianova w-100"|attr:"id:id_ncodalic" }}
  </div>
</div>

<div class="row mb-3">
  <div class="col-md-3">
    <label class="form-label">Costo con IVA:</label>
    <input type="text" id="costoiva" class="form-control input-cianova-readonly w-100" value="{{ form.instance.costoiva|default:"0.00" }}" readonly>
  </div>
  <div class="col-md-3">
    <label class="form-label">Precio Venta (sin IVA):</label>
    <input type="text" id="preventa" class="form-control input-cianova-readonly w-100" value="{{ form.instance.preventa|default:"0.00" }}" readonly>
  </div>
  <div class="col-md-3">
    <label class="form-label">Precio Final (con IVA):</label>
    {% if form.instance.modo_calculo == 'C' %}
      <span id="prefinal-display" class="form-control input-cianova-readonly w-100">{{ form.instance.prefinal|default:"0.00" }}</span>
      {{ form.prefinal|add_class:"form-control input-cianova w-100"|attr:"id:prefinal-input"|attr:"step:0.01"|attr:"style:display:none;" }}
    {% else %}
      {{ form.prefinal|add_class:"form-control input-cianova w-100"|attr:"id:prefinal-input"|attr:"step:0.01" }}
      <span id="prefinal-display" class="form-control input-cianova-readonly w-100" style="display:none;"></span>
    {% endif %}
  </div>
  <div class="col-md-3">
    <label class="form-label">Fecha última modificación:</label>
    <input type="text" id="fecultmod" class="form-control input-cianova-readonly w-100" value="{{ form.instance.fecultmod|date:"d/m/Y" }}" readonly>
  </div>
</div>
